
<!-- Libraries -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
<script>
  document.write('<script src=/js/lib/'
    + ('__proto__' in {} ? 'zepto' : 'jquery')
    + '.js><\/script>');
</script>
<% if(env === 'production') { %>
  <script type="text/javascript" src="js/app.libraries.min.js"></script>
<% } else { %>
  <script type="text/javascript" src="js/lib/underscore.js"></script>
  <script type="text/javascript" src="js/lib/leaflet.js"></script>
  <script type="text/javascript" src="js/lib/wax.leaf.js"></script>
  <script type="text/javascript" src="js/lib/foundation.js"></script>
  <script type="text/javascript" src="js/lib/foundation.topbar.js"></script>
  <script type="text/javascript" src="js/lib/foundation.reveal.js"></script>
<% } %>

<!-- Init foundation -->
<script type="text/javascript">
  $(function(){
    $(document).foundation();    
  });
</script>

<!-- App Code -->
<% if(env === 'production') { %>
  <script type="text/javascript" src="js/app.min.js"></script>
<% } else { %>
  <script type="text/javascript" src="js/app.js"></script>
<% } %>
<script type="text/javascript">
  // Default settings. Zoom and center overridden by URL params, if they exist
  app.opts = {
    mapContainer: 'map',
    tileURL: 'http://api.tiles.mapbox.com/v3/axisphilly.map-5rf31e6p.jsonp',
    mapOptions: {
      center: [39.99, -75.150],
      zoom: 12,
      minZoom: 11,
      maxZoom: 18,
      maxBounds: [
        [39.69, -76.20],
        [40.60, -74.14]
      ],
      zoomControl: false // readded to the topright corner
    }
  }

  // Kick off map
  app.initMap(function() {
    $('#geolocation').click(function(event){
      event.preventDefault();

      $(this).find('img').attr('src', 'img/loading.gif');

      app.getLocation(function(position){
        app.addMarker(position.coords.latitude, position.coords.longitude);

        $('#geolocation').find('img').attr('src', 'img/marker.png');
      });
    });

    /*$('#info').click(function(event){
      event.preventDefault();

      $('#infoModal').foundation('reveal', 'open');
    });*/
  });
</script>
<!-- modals -->
<div id="infoModal" class="reveal-modal">
  <h2>Awesome. I have it.</h2>
  <p class="lead">Your couch.  It is mine.</p>
  <p>Im a cool paragraph that lives inside of an even cooler modal. Wins</p>
  <a class="close-reveal-modal">&#215;</a>
</div>